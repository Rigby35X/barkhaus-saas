---
import BaseLayout from "@layouts/BaseLayout.astro";
import { fetchAllPageData } from "../../utils/content-fetcher.js";

// Fetch dynamic content for the page
const { content, organization } = await fetchAllPageData('applications', '9', Astro.url.origin);

// Use dynamic content with fallbacks
const adoptionContent = content.foster_application || {};
---

<BaseLayout
  title="Mission Bay Puppy Rescue - Relinquishment Form"
  description="Life happens. We get it. If you need to rehome your pet, please complete our relinquishment form."
  organization={organization}
>
  <!-- ============================================ -->
  <!--                 Page Header                  -->
  <!-- ============================================ -->
  
  <section id="page-header">
    <div class="cs-container">
      <h1 class="cs-title">Relinquishment Form</h1>
      <p class="cs-text">
        Life happens. We get it. If you need to rehome your pet, please complete our relinquishment form. Our main goal will always be to keep pets with their loving families. However, when all resources have been fully exhausted, we can help you and your pet move to the next chapter of your lives.
      </p>
    </div>
  </section>

  <!-- ============================================ -->
  <!--              Relinquishment Form                -->
  <!-- ============================================ -->
  
  <section id="application-form">
    <div class="cs-container">
      <div class="cs-form-wrapper">
        
        <!-- Relinquishment Instructions -->
        <div class="cs-instructions">
          <h2>Before You Begin</h2>
          <div class="cs-instruction-grid">
            
            <div class="cs-instruction-item">
              <div class="cs-icon">üè†</div>
              <h3>Please note</h3>
              <p>Our rescue focuses on pregnant or post-birth females with or without litters, abandoned pups/litters and/or puppies under 12 months old. <br><br> We do not guarentee that we can take your animal(s) at this time but we will assist you as best as possible to help you find a place to take your pet.</p>
            </div>
            <div class="cs-instruction-item">
              <div class="cs-icon">üìã</div>
              <h3>Lost Pets</h3>
              <p>If you have found a lost/stray dog, please take them to¬†San Diego Humane Society. If the dog is pregnant or a pup, let them know to contact Mission Bay Puppy Rescue once the 72 hours hold has been met.¬†<br><br> We assess the situation and if/when possible, we pull the pups from the shelter and bring them to our rescue. We work closely with the shelters. They provide outstanding care and we are all doing our part to find the best home for your dog.</p>
            <a href="https://sdhumane.org/services/lost-found-pets/" class="cs-button-solid">Visit SD Humane Society</a>
          </a>
            </div>
            
</div>
          </div>
        </div>

        <!-- Embedded Cognito Form -->
        <div class="cs-form-container">
          <div class="cs-form-header">
            <h2>Relinquishment Form</h2>
            <p>Please complete all sections of the form below:</p>
          </div>
          
          <!-- Cognito Form Embed -->
          <div id="cognito-form" class="cs-cognito-form">
            <script src="https://www.cognitoforms.com/f/seamless.js" data-key="fGT316vhT0-rU8gCrayexQ" data-form="5"></script>
          </div>
        </div>

       

        <!-- Contact Information -->
        <div class="cs-contact-info">
          <h2>Questions?</h2>
          <p>
            If you have any questions about the relinquishment process or need assistance 
            with the application, please don't hesitate to contact us.
          </p>
          <div class="cs-contact-details">
            <div class="cs-contact-item">
              <strong>Email:</strong> 
              <a href="mailto:contact@mbpups.org">contact@mbpups.org</a>
            </div>
            <div class="cs-contact-item">
              <strong>Phone:</strong> 
              <a href="tel:+15555555555">(858) 204-3885</a>
            </div>
            <div class="cs-contact-item">
              <strong>Hours:</strong> 
              By Appointment Only
            </div>
          </div>
          <a href="/contact" class="cs-button-transparent">Contact Us</a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style lang="less">
  /* Page Header */
  #page-header {
    padding: var(--sectionPadding);
    background: linear-gradient(135deg, var(--primary) 0%, var(--primaryDark) 100%);
    color: white;
    text-align: center;

    .cs-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .cs-title {
      font-size: clamp(2.5rem, 5vw, 4rem);
      margin-bottom: 1rem;
      color: white;
    }

    .cs-text {
      font-size: 1.125rem;
      line-height: 1.6;
      color: rgba(255, 255, 255, 0.9);
      max-width: 600px;
      margin: 0 auto;
    }
  }

  /* Application Form Section */
  #application-form {
    padding: var(--sectionPadding);
    background: #f8f9fa;

    .cs-container {
      max-width: 1000px;
      margin: 0 auto;
    }

    .cs-form-wrapper {
      display: flex;
      flex-direction: column;
      gap: 3rem;
    }
  }

  /* Instructions */
  .cs-instructions {
    background: white;
    padding: 2.5rem;
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);

    h2 {
      font-size: 1.75rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: 2rem;
      color: var(--headerColor);
    }

    .cs-instruction-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.5rem;
    }

    .cs-instruction-item {
      text-align: center;
      padding: 1.5rem;
      background: white;
      border: 2px solid var(--accent);
      border-radius: 12px;
      transition: border-color 0.3s ease;

      &:hover {
        border-color: var(--primary);
      }

      .cs-icon {
        font-size: 2rem;
        margin-bottom: 1rem;
      }

      h3 {
        font-size: 1.125rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        color: var(--primary);
      }

      p {
        font-size: 0.875rem;
        line-height: 1.5;
        color: var(--bodyTextColor);
        margin: 0;
      }
    }
  }

  /* Form Container */
  .cs-form-container {
    background: white;
    padding: 2.5rem;
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);

    .cs-form-header {
      text-align: center;
      margin-bottom: 2rem;

      h2 {
        font-size: 1.75rem;
        font-weight: 700;
        margin-bottom: 0.75rem;
        color: var(--headerColor);
      }

      p {
        font-size: 1rem;
        color: var(--bodyTextColor);
        margin: 0;
      }
    }

    .cs-cognito-form {
      /* Ensure the form takes full width and integrates well */
      width: 100%;
      
      /* Style the embedded form to match site design */
      :global(.cognito) {
        font-family: inherit !important;
        
        .c-forms-form {
          border: none !important;
          box-shadow: none !important;
          background: transparent !important;
        }
        
        .c-forms-form-title {
          display: none !important; /* Hide the form title since we have our own */
        }
        
        .c-textbox, .c-textarea, .c-dropdown {
          border: 2px solid #e1e5e9 !important;
          border-radius: 8px !important;
          padding: 12px 16px !important;
          font-size: 1rem !important;
          transition: border-color 0.3s ease !important;
          
          &:focus {
            border-color: var(--primary) !important;
            outline: none !important;
            box-shadow: 0 0 0 3px rgba(107, 179, 235, 0.1) !important;
          }
        }
        
        .c-label {
          font-weight: 600 !important;
          color: var(--headerColor) !important;
          margin-bottom: 8px !important;
        }
        
        .c-button {
          background: var(--primary) !important;
          border: none !important;
          border-radius: 8px !important;
          padding: 12px 24px !important;
          font-size: 1rem !important;
          font-weight: 600 !important;
          color: white !important;
          cursor: pointer !important;
          transition: background-color 0.3s ease !important;
          
          &:hover {
            background: var(--primaryDark) !important;
          }
        }
        
        .c-forms-section {
          margin-bottom: 2rem !important;
        }
        
        .c-forms-section-header {
          font-size: 1.25rem !important;
          font-weight: 600 !important;
          color: var(--headerColor) !important;
          border-bottom: 2px solid var(--primary) !important;
          padding-bottom: 0.5rem !important;
          margin-bottom: 1.5rem !important;
        }
      }
    }
  }

  /* Additional Information */
  .cs-additional-info {
    background: white;
    padding: 2.5rem;
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);

    h2 {
      font-size: 1.75rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: 2rem;
      color: var(--headerColor);
    }

    .cs-process-steps {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .cs-step {
      display: flex;
      align-items: flex-start;
      gap: 1.5rem;
      padding: 1.5rem;
      background: white;
      border: 2px solid var(--accent);
      border-radius: 12px;
      transition: transform 0.3s ease;

      &:hover {
        transform: translateX(5px);
        border-color: var(--primary);
      }

      .cs-step-number {
        flex-shrink: 0;
        width: 40px;
        height: 40px;
        background: var(--primary);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 1.125rem;
      }

      .cs-step-content {
        flex: 1;

        h3 {
          font-size: 1.125rem;
          font-weight: 600;
          margin-bottom: 0.5rem;
          color: var(--headerColor);
        }

        p {
          font-size: 0.875rem;
          line-height: 1.5;
          color: var(--bodyTextColor);
          margin: 0;
        }
      }
    }
  }

  /* Contact Information */
  .cs-contact-info {
    background: white;
    padding: 2.5rem;
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
    text-align: center;

    h2 {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: var(--headerColor);
    }

    > p {
      font-size: 1rem;
      line-height: 1.6;
      margin-bottom: 2rem;
      color: var(--bodyTextColor);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .cs-contact-details {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 2rem;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .cs-contact-item {
      padding: 1rem;
      background: white;
      border: 2px solid var(--accent);
      border-radius: 8px;
      font-size: 0.875rem;

      strong {
        color: var(--primary);
        margin-right: 0.5rem;
      }

      a {
        color: var(--primary);
        text-decoration: none;
        font-weight: 500;

        &:hover {
          text-decoration: underline;
        }
      }
    }
  }

  /* Mobile Responsive */
  @media only screen and (max-width: 768px) {
    .cs-instruction-grid {
      grid-template-columns: 1fr;
    }

    .cs-form-container,
    .cs-instructions,
    .cs-additional-info,
    .cs-contact-info {
      padding: 2rem;
    }

    .cs-step {
      flex-direction: column;
      text-align: center;
      gap: 1rem;
    }

    .cs-contact-details {
      gap: 0.75rem;
    }
  }

  @media only screen and (max-width: 480px) {
    .cs-form-container,
    .cs-instructions,
    .cs-additional-info,
    .cs-contact-info {
      padding: 1.5rem;
    }

    .cs-step {
      padding: 1rem;
    }

    .cs-step-number {
      width: 35px;
      height: 35px;
      font-size: 1rem;
    }

    h2 {
      font-size: 1.5rem;
    }

    .cs-instruction-item {
      padding: 1rem;
    }
  }
</style>
